<?xml version="1.0" encoding="UTF-8"?>
<Simulation verbosity="debug">
    
	<RunInfo>
	    <WorkingDir>./results</WorkingDir>
	    <Sequence>extract_data4,rom_trainer4,RunROM4,plot_data_4</Sequence>
	    <batchSize>1</batchSize>
	</RunInfo>
	
	<Files>
	    <Input name="ROM3pk" type="">ROM3pk</Input>
	</Files>
	
	<Distributions>
        <Normal name="v0_d">
            <mean>1.0</mean>
            <sigma>0.5</sigma>
            <lowerBound>0</lowerBound>
            <upperBound>3.0</upperBound>
        </Normal>
        <Normal name="angle_d">
            <mean>45</mean>
            <sigma>5</sigma>
            <lowerBound>5</lowerBound>
            <upperBound>85</upperBound>
        </Normal>
	</Distributions>
	
	<Models>
	    <ROM  name="ROM4" subType="NDinvDistWeight">
	        <Features>v0,angle</Features>
            <Target>t,x,y,r</Target>
            <p>3</p>
	    </ROM>
	</Models>
	
	<Samplers>
      <Grid name="grid">
          <variable name="v0">
              <distribution>v0_d</distribution>
              <grid construction="equal" steps="6" type="CDF">0.1 0.9</grid>
          </variable>
          <variable name="angle">
              <distribution>angle_d</distribution>
              <grid construction="equal" steps="6" type="CDF">0.1 0.9</grid>
          </variable>
      </Grid>
	</Samplers>
		
	<Steps>
	    <IOStep name="extract_data4">
	        <Input   class="Databases"    type="HDF5"         >out_db</Input>
	        <Output  class="DataObjects"  type="PointSet"     >outGRID_y4</Output>
	    </IOStep>
	    <RomTrainer name="rom_trainer4">
	        <Input   class="DataObjects"  type="PointSet"     >outGRID_y4</Input>
	        <Output  class="Models"       type="ROM"          >ROM4</Output>
	    </RomTrainer>
	    <MultiRun name="RunROM4">
	        <Input   class="DataObjects"  type="PointSet"     >Data1</Input>
	        <Model   class="Models"       type="ROM"          >ROM4</Model>
	        <Sampler class="Samplers"     type="Grid"         >grid</Sampler>
	        <Output  class="DataObjects"  type="PointSet"   >outROM_y4</Output>
	    </MultiRun>
	    <IOStep name="plot_data_4" pauseAtEnd="True">
	        <Input   class="DataObjects"  type="PointSet"     >outROM_y4</Input>
	        <Input   class="DataObjects"  type="PointSet"     >outGRID_y4</Input>
	        <Output  class="OutStreams"   type="Plot"         >plot_ROM</Output>
	        <Output  class="OutStreams"   type="Plot"         >plot_Grid</Output>
	    </IOStep>
	</Steps>
		
	<Databases>
	    <HDF5 name="out_db" filename="out_db.h5" readMode="read" directory="./DatabaseStorage/"/>
	</Databases>
	
	<DataObjects>
	    <PointSet name="Data1">
	        <Input>v0,angle</Input>
	        <Output>OutputPlaceHolder</Output>
	    </PointSet>
	    <PointSet name="outGRID_y4">
	        <Input>v0,angle</Input>
	        <Output>x,y,t,r</Output>
	    </PointSet>
	    <PointSet name="outROM_y4">
	        <Input>v0,angle</Input>
	        <Output>t,x,y,r</Output>
	    </PointSet>
	</DataObjects>
	
	<OutStreams>
      <Plot  name="plot_ROM">
        <plotSettings>
          <plot>
            <type>scatter</type>
            <x>outROM_y4|Input|v0</x>
            <y>outROM_y4|Input|angle</y>
            <z>outROM_y4|Output|r</z>
            <colorMap>outROM_y4|Output|t</colorMap>
          </plot>
          <xlabel>v0</xlabel>
          <ylabel>angle</ylabel>
          <zlabel>r</zlabel>
        </plotSettings>
        <actions><how>png,screen</how></actions>
      </Plot>
      <Plot  name="plot_Grid">
        <plotSettings>
          <plot>
            <type>scatter</type>
            <x>outGRID_y4|Input|v0</x>
            <y>outGRID_y4|Input|angle</y>
            <z>outGRID_y4|Output|r</z>
            <colorMap>outGRID_y4|Output|t</colorMap>
          </plot>
          <xlabel>v0</xlabel>
          <ylabel>angle</ylabel>
          <zlabel>r</zlabel>
        </plotSettings>
        <actions><how>png,screen</how></actions>
      </Plot>
	</OutStreams>

</Simulation>



