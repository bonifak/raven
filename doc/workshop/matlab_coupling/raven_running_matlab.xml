<?xml version="1.0" ?>
<Simulation color="true" verbosity="all">


  <RunInfo>
    <WorkingDir> .                         </WorkingDir>
    <Sequence>   step_generateData, step_outputData </Sequence>
    <batchSize>  4                                  </batchSize>
  </RunInfo>

  <Steps>
    <MultiRun  name="step_generateData">
      <Sampler class="Samplers"      type="MonteCarlo"> sampler_mc           </Sampler>
	  <Input   class="Files"         type="">           file_matlab_systemcode       </Input>
      <Model   class="Models"        type="Code">       matlabcode           </Model>
      <Output  class="DataObjects"   type="PointSet">   pntset_vars          </Output>
    </MultiRun>                                                              
    <IOStep    name="step_outputData">                                       
      <Input   class="DataObjects"   type="PointSet">   pntset_vars          </Input>
      <Output  class="OutStreams"    type="Print">      print_pointset       </Output>
    </IOStep>
  </Steps>

  <Files>
	<Input     name="file_matlab_systemcode" type="">          matlabcode.m   </Input>
  </Files>

  <Models>
    <Code name="matlabcode" subType="GenericCode">
	<shell>False</shell> <!-- makes RAVEN ok with a shell coming up -->
	<inputExtensions>.m</inputExtensions>
	<clargs type='input' arg='matlab  -nosplash -nodesktop -wait -r "run ./matlabcode.m"' extension='.m'/>
	<executable>"C:\Program Files\MATLAB\MATLAB Production Server\R2015a\bin\matlab"</executable>
	<outputFile>matlab_output.csv</outputFile>
    </Code>

  </Models>

  <Distributions>
    <Uniform name="dist_test">
      <lowerBound>5</lowerBound>
      <upperBound>20</upperBound>
    </Uniform>
  </Distributions>  
  
  <Samplers>
    <MonteCarlo name="sampler_mc">
      <samplerInit>
        <limit>2</limit>
        <initialSeed>42</initialSeed>
      </samplerInit>
      <variable name="var_test">
        <distribution>dist_test</distribution>
      </variable>
    </MonteCarlo>
  </Samplers>

  
  <DataObjects>
    <PointSet name="pntset_vars">
      <Input>var_test</Input>
      <Output>calculated_var</Output> <!-- these need to match the column headers in the parsed TRACE output csv -->
    </PointSet>
  </DataObjects>

  <OutStreams>
    <!-- Print to CSV -->
    <Print name="print_pointset">
      <type>csv</type>
      <source>pntset_vars</source>
    </Print>

  </OutStreams>

</Simulation>
