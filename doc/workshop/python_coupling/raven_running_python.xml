<?xml version="1.0" ?>
<Simulation color="true" verbosity="all">


  <RunInfo>
    <WorkingDir> .                         </WorkingDir>
    <Sequence>   step_generateData, step_outputData </Sequence>
    <batchSize>  4                                  </batchSize>
  </RunInfo>

  <Steps>
    <MultiRun  name="step_generateData">
      <Sampler class="Samplers"      type="MonteCarlo"> sampler_mc           </Sampler>
	  <Input   class="Files"         type="">           file_pythoninput       </Input>
      <Model   class="Models"        type="Code">       pythoncode           </Model>
      <Output  class="DataObjects"   type="PointSet">   pntset_vars          </Output>
    </MultiRun>                                                              
    <IOStep    name="step_outputData">                                       
      <Input   class="DataObjects"   type="PointSet">   pntset_vars          </Input>
      <Output  class="OutStreams"    type="Print">      print_pointset       </Output>
    </IOStep>
  </Steps>

  <Files>
	<Input     name="file_pythoninput" type="">     ./input_for_pythoncode.i   </Input>
  </Files>

  <Models>
    <Code name="pythoncode" subType="GenericCode">
	<executable>python_systemcode.py</executable>
	<clargs arg="python" type="prepend"/>
	<clargs arg="" extension=".i" type="input"/>
	<clargs arg=" " extension=".csv" type="output"/>
	<outputFile>finalizedCodeOutput.csv</outputFile>
    </Code>
  </Models>

  <DataObjects>
    <PointSet name="pntset_vars">
      <Input>diam</Input> <!-- this is one of the sampled params in Samplers -->
      <Output>time_window</Output> <!-- these need to match the column headers in the parsed python output csv -->
    </PointSet>
  </DataObjects>
  
  <Distributions>
    <Uniform name="dist_test">
      <lowerBound>5</lowerBound>
      <upperBound>20</upperBound>
    </Uniform>
  </Distributions>  
  
  <Samplers>
    <MonteCarlo name="sampler_mc">
      <samplerInit>
        <limit>4</limit>
        <initialSeed>42</initialSeed>
      </samplerInit>
      <variable name="diam">
        <distribution>dist_test</distribution>
      </variable>
    </MonteCarlo>
  </Samplers>

  
  

  <OutStreams>
    <!-- Print to CSV -->
    <Print name="print_pointset">
      <type>csv</type>
      <source>pntset_vars</source>
    </Print>

  </OutStreams>

</Simulation>
